!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vega"),require("vega-lite")):"function"==typeof define&&define.amd?define(["vega","vega-lite"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).vegaEmbed=t(e.vega,e.vegaLite)}(this,(function(e,t){"use strict";function n(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var i,r=n(e),o=n(t),a=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=Object.prototype.hasOwnProperty;function l(e,t){return s.call(e,t)}function c(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)l(e,r)&&i.push(r);return i}function h(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function d(e){for(var t,n=0,i=e.length;n<i;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function p(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function f(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(f(e[t]))return!0}else if("object"==typeof e)for(var i=c(e),r=i.length,o=0;o<r;o++)if(f(e[i[o]]))return!0;return!1}function g(e,t){var n=[e];for(var i in t){var r="object"==typeof t[i]?JSON.stringify(t[i],null,2):t[i];void 0!==r&&n.push(i+": "+r)}return n.join("\n")}var v=function(e){function t(t,n,i,r,o){var a=this.constructor,s=e.call(this,g(t,{name:n,index:i,operation:r,tree:o}))||this;return s.name=n,s.index=i,s.operation=r,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=g(t,{name:n,index:i,operation:r,tree:o}),s}return a(t,e),t}(Error),m=v,E=h,b={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=w(n,this.path);i&&(i=h(i));var r=O(n,{op:"remove",path:this.from}).removed;return O(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=w(n,this.from);return O(n,{op:"add",path:this.path,value:h(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:I(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},y={add:function(e,t,n){return d(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:b.move,copy:b.copy,test:b.test,_get:b._get};function w(e,t){if(""==t)return e;var n={op:"_get",path:t};return O(e,n),n.value}function O(e,t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):x(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=w(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=I(e,t.value),!1===a.test)throw new m("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new m("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}i||(e=h(e));var s=(t.path||"").split("/"),l=e,c=1,p=s.length,f=void 0,g=void 0,v=void 0;for(v="function"==typeof n?n:x;;){if((g=s[c])&&-1!=g.indexOf("~")&&(g=u(g)),r&&("__proto__"==g||"prototype"==g&&c>0&&"constructor"==s[c-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===l[g]?f=s.slice(0,c).join("/"):c==p-1&&(f=t.path),void 0!==f&&v(t,0,e,f)),c++,Array.isArray(l)){if("-"===g)g=l.length;else{if(n&&!d(g))throw new m("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);d(g)&&(g=~~g)}if(c>=p){if(n&&"add"===t.op&&g>l.length)throw new m("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=y[t.op].call(t,l,g,e)).test)throw new m("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=p){if(!1===(a=b[t.op].call(t,l,g,e)).test)throw new m("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[g],n&&c<p&&(!l||"object"!=typeof l))throw new m("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function A(e,t,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(t))throw new m("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=h(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=O(e,t[a],n,!0,r,a),e=o[a].newDocument;return o.newDocument=e,o}function x(e,t,n,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new m("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!b[e.op])throw new m("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new m("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new m('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new m("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&f(e.value))throw new m("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new m("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new m("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=N([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new m("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function N(e,t,n){try{if(!Array.isArray(e))throw new m("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)A(h(t),h(e),n||!0);else{n=n||x;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(e){if(e instanceof m)return e;throw e}}function I(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,i,r,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((i=e.length)!=t.length)return!1;for(n=i;0!=n--;)if(!I(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((i=s.length)!==Object.keys(t).length)return!1;for(n=i;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=i;0!=n--;)if(!I(e[r=s[n]],t[r]))return!1;return!0}return e!=e&&t!=t}var L=Object.freeze({__proto__:null,JsonPatchError:m,deepClone:E,getValueByPointer:w,applyOperation:O,applyPatch:A,applyReducer:function(e,t,n){var i=O(e,t);if(!1===i.test)throw new m("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument},validator:x,validate:N,_areEquals:I}),$=new WeakMap,R=function(e){this.observers=new Map,this.obj=e},S=function(e,t){this.callback=e,this.observer=t};
/*!
     * https://github.com/Starcounter-Jack/JSON-Patch
     * (c) 2017-2021 Joachim Wester
     * MIT license
     */function T(e,t){void 0===t&&(t=!1);var n=$.get(e.object);D(n.value,e.object,e.patches,"",t),e.patches.length&&A(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function D(e,t,n,i,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=c(t),a=c(e),s=!1,d=a.length-1;d>=0;d--){var u=e[g=a[d]];if(!l(t,g)||void 0===t[g]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+p(g),value:h(u)}),n.push({op:"remove",path:i+"/"+p(g)}),s=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}));else{var f=t[g];"object"==typeof u&&null!=u&&"object"==typeof f&&null!=f&&Array.isArray(u)===Array.isArray(f)?D(u,f,n,i+"/"+p(g),r):u!==f&&(r&&n.push({op:"test",path:i+"/"+p(g),value:h(u)}),n.push({op:"replace",path:i+"/"+p(g),value:h(f)}))}}if(s||o.length!=a.length)for(d=0;d<o.length;d++){var g;l(e,g=o[d])||void 0===t[g]||n.push({op:"add",path:i+"/"+p(g),value:h(t[g])})}}}var C=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var n,i=function(e){return $.get(e)}(e);if(i){var r=function(e,t){return e.observers.get(t)}(i,t);n=r&&r.observer}else i=new R(e),$.set(e,i);if(n)return n;if(n={},i.value=h(e),t){n.callback=t,n.next=null;var o=function(){T(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){T(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(i,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new S(t,n)),n},generate:T,compare:function(e,t,n){void 0===n&&(n=!1);var i=[];return D(e,t,i,"",n),i}});Object.assign({},L,C,{JsonPatchError:v,deepClone:h,escapePathComponent:p,unescapePathComponent:u});var F=/("(?:[^\\"]|\\.)*")|[:,]/g,k=function(e,t){var n,i,r;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),i=""===n?1/0:void 0===t.maxLength?80:t.maxLength,r=t.replacer,function e(t,o,a){var s,l,c,h,d,p,u,f,g,v,m,E;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(m=JSON.stringify(t,r)))return m;if(u=i-o.length-a,m.length<=u&&(g=m.replace(F,(function(e,t){return t||e+" "}))).length<=u)return g;if(null!=r&&(t=JSON.parse(m),r=void 0),"object"==typeof t&&null!==t){if(f=o+n,c=[],l=0,Array.isArray(t))for(v="[",s="]",u=t.length;l<u;l++)c.push(e(t[l],f,l===u-1?0:1)||"null");else for(v="{",s="}",u=(p=Object.keys(t)).length;l<u;l++)h=p[l],d=JSON.stringify(h)+": ",void 0!==(E=e(t[h],f,d.length+(l===u-1?0:1)))&&c.push(d+E);if(c.length>0)return[v,n+c.join(",\n"+f),s].join("\n"+o)}return m}(e,"",0)},_=P;function P(e){var t=this;if(t instanceof P||(t=new P),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function M(e,t,n){var i=t===e.head?new U(n,null,t,e):new U(n,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function j(e,t){e.tail=new U(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function z(e,t){e.head=new U(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function U(e,t,n,i){if(!(this instanceof U))return new U(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}P.Node=U,P.create=P,P.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},P.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},P.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},P.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)j(this,arguments[e]);return this.length},P.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)z(this,arguments[e]);return this.length},P.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},P.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},P.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;null!==n;i++)e.call(t,n.value,i,this),n=n.next},P.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;null!==n;i--)e.call(t,n.value,i,this),n=n.prev},P.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},P.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},P.prototype.map=function(e,t){t=t||this;for(var n=new P,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},P.prototype.mapReverse=function(e,t){t=t||this;for(var n=new P,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},P.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=e(n,i.value,r),i=i.next;return n},P.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=e(n,i.value,r),i=i.prev;return n},P.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},P.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},P.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new P;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;for(;null!==r&&i<t;i++,r=r.next)n.push(r.value);return n},P.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new P;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;null!==r&&i>t;i--)r=r.prev;for(;null!==r&&i>e;i--,r=r.prev)n.push(r.value);return n},P.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var r=[];for(n=0;i&&n<t;n++)r.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)i=M(this,i,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return r},P.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};try{P.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}catch(e){}const B=_,G=Symbol("max"),X=Symbol("length"),W=Symbol("lengthCalculator"),V=Symbol("allowStale"),H=Symbol("maxAge"),q=Symbol("dispose"),Y=Symbol("noDisposeOnSet"),J=Symbol("lruList"),Q=Symbol("cache"),Z=Symbol("updateAgeOnGet"),K=()=>1;const ee=(e,t,n)=>{const i=e[Q].get(t);if(i){const t=i.value;if(te(e,t)){if(ie(e,i),!e[V])return}else n&&(e[Z]&&(i.value.now=Date.now()),e[J].unshiftNode(i));return t.value}},te=(e,t)=>{if(!t||!t.maxAge&&!e[H])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[H]&&n>e[H]},ne=e=>{if(e[X]>e[G])for(let t=e[J].tail;e[X]>e[G]&&null!==t;){const n=t.prev;ie(e,t),t=n}},ie=(e,t)=>{if(t){const n=t.value;e[q]&&e[q](n.key,n.value),e[X]-=n.length,e[Q].delete(n.key),e[J].removeNode(t)}};class re{constructor(e,t,n,i,r){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=r||0}}const oe=(e,t,n,i)=>{let r=n.value;te(e,r)&&(ie(e,n),e[V]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var ae=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[G]=e.max||1/0;const t=e.length||K;if(this[W]="function"!=typeof t?K:t,this[V]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[H]=e.maxAge||0,this[q]=e.dispose,this[Y]=e.noDisposeOnSet||!1,this[Z]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[G]=e||1/0,ne(this)}get max(){return this[G]}set allowStale(e){this[V]=!!e}get allowStale(){return this[V]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[H]=e,ne(this)}get maxAge(){return this[H]}set lengthCalculator(e){"function"!=typeof e&&(e=K),e!==this[W]&&(this[W]=e,this[X]=0,this[J].forEach((e=>{e.length=this[W](e.value,e.key),this[X]+=e.length}))),ne(this)}get lengthCalculator(){return this[W]}get length(){return this[X]}get itemCount(){return this[J].length}rforEach(e,t){t=t||this;for(let n=this[J].tail;null!==n;){const i=n.prev;oe(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[J].head;null!==n;){const i=n.next;oe(this,e,n,t),n=i}}keys(){return this[J].toArray().map((e=>e.key))}values(){return this[J].toArray().map((e=>e.value))}reset(){this[q]&&this[J]&&this[J].length&&this[J].forEach((e=>this[q](e.key,e.value))),this[Q]=new Map,this[J]=new B,this[X]=0}dump(){return this[J].map((e=>!te(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[J]}set(e,t,n){if((n=n||this[H])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const i=n?Date.now():0,r=this[W](t,e);if(this[Q].has(e)){if(r>this[G])return ie(this,this[Q].get(e)),!1;const o=this[Q].get(e).value;return this[q]&&(this[Y]||this[q](e,o.value)),o.now=i,o.maxAge=n,o.value=t,this[X]+=r-o.length,o.length=r,this.get(e),ne(this),!0}const o=new re(e,t,r,i,n);return o.length>this[G]?(this[q]&&this[q](e,t),!1):(this[X]+=o.length,this[J].unshift(o),this[Q].set(e,this[J].head),ne(this),!0)}has(e){if(!this[Q].has(e))return!1;const t=this[Q].get(e).value;return!te(this,t)}get(e){return ee(this,e,!0)}peek(e){return ee(this,e,!1)}pop(){const e=this[J].tail;return e?(ie(this,e),e.value):null}del(e){ie(this,this[Q].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const e=r-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[Q].forEach(((e,t)=>ee(this,t,!1)))}};const se=["includePrerelease","loose","rtl"];var le=e=>e?"object"!=typeof e?{loose:!0}:se.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{},ce={exports:{}};var he={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};const de="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{};var pe=de;!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=he,i=pe,r=(t=e.exports={}).re=[],o=t.src=[],a=t.t={};let s=0;const l=(e,t,n)=>{const l=s++;i(e,l,t),a[e]=l,o[l]=t,r[l]=new RegExp(t,n?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),l("FULL",`^${o[a.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),l("LOOSE",`^${o[a.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),l("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",o[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(ce,ce.exports);const ue=/^[0-9]+$/,fe=(e,t)=>{const n=ue.test(e),i=ue.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};var ge={compareIdentifiers:fe,rcompareIdentifiers:(e,t)=>fe(t,e)};const ve=pe,{MAX_LENGTH:me,MAX_SAFE_INTEGER:Ee}=he,{re:be,t:ye}=ce.exports,we=le,{compareIdentifiers:Oe}=ge;let Ae=class{constructor(e,t){if(t=we(t),e instanceof Ae){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>me)throw new TypeError(`version is longer than ${me} characters`);ve("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?be[ye.LOOSE]:be[ye.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ee||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ee||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ee||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Ee)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ve("SemVer.compare",this.version,this.options,e),!(e instanceof Ae)){if("string"==typeof e&&e===this.version)return 0;e=new Ae(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ae||(e=new Ae(e,this.options)),Oe(this.major,e.major)||Oe(this.minor,e.minor)||Oe(this.patch,e.patch)}comparePre(e){if(e instanceof Ae||(e=new Ae(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(ve("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return Oe(n,i)}while(++t)}compareBuild(e){e instanceof Ae||(e=new Ae(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(ve("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return Oe(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===Oe(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var xe=Ae;const Ne=xe;var Ie=(e,t,n)=>new Ne(e,n).compare(new Ne(t,n));const Le=Ie;const $e=Ie;const Re=Ie;const Se=Ie;const Te=Ie;const De=Ie;const Ce=(e,t,n)=>0===Le(e,t,n),Fe=(e,t,n)=>0!==$e(e,t,n),ke=(e,t,n)=>Re(e,t,n)>0,_e=(e,t,n)=>Se(e,t,n)>=0,Pe=(e,t,n)=>Te(e,t,n)<0,Me=(e,t,n)=>De(e,t,n)<=0;var je,ze,Ue,Be,Ge=(e,t,n,i)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Ce(e,n,i);case"!=":return Fe(e,n,i);case">":return ke(e,n,i);case">=":return _e(e,n,i);case"<":return Pe(e,n,i);case"<=":return Me(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};function Xe(){if(Be)return Ue;Be=1;class e{constructor(t,r){if(r=n(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof i)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!d(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&p(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,o=t.get(n);if(o)return o;const p=this.options.loose,u=p?a[s.HYPHENRANGELOOSE]:a[s.HYPHENRANGE];e=e.replace(u,x(this.options.includePrerelease)),r("hyphen replace",e),e=e.replace(a[s.COMPARATORTRIM],l),r("comparator trim",e);let g=(e=(e=(e=e.replace(a[s.TILDETRIM],c)).replace(a[s.CARETTRIM],h)).split(/\s+/).join(" ")).split(" ").map((e=>f(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));p&&(g=g.filter((e=>(r("loose invalid filter",e,this.options),!!e.match(a[s.COMPARATORLOOSE]))))),r("range list",g);const v=new Map,m=g.map((e=>new i(e,this.options)));for(const e of m){if(d(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const E=[...v.values()];return t.set(n,E),E}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>u(e,n)&&t.set.some((t=>u(t,n)&&e.every((e=>t.every((t=>e.intersects(t,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}Ue=e;const t=new ae({max:1e3}),n=le,i=function(){if(ze)return je;ze=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(i,r){if(r=n(r),i instanceof t){if(i.loose===!!r.loose)return i;i=i.value}a("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){const n=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],o=t.match(n);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new s(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new s(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");if(n&&"object"==typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new l(e.value,n).test(this.value);if(""===e.operator)return""===e.value||new l(this.value,n).test(e.semver);const i=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),c=o(this.semver,"<",e.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),h=o(this.semver,">",e.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||r||a&&s||c||h}}je=t;const n=le,{re:i,t:r}=ce.exports,o=Ge,a=pe,s=xe,l=Xe();return je}(),r=pe,o=xe,{re:a,t:s,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:h}=ce.exports,d=e=>"<0.0.0-0"===e.value,p=e=>""===e.value,u=(e,t)=>{let n=!0;const i=e.slice();let r=i.pop();for(;n&&i.length;)n=i.every((e=>r.intersects(e,t))),r=i.pop();return n},f=(e,t)=>(r("comp",e,t),e=E(e,t),r("caret",e),e=v(e,t),r("tildes",e),e=y(e,t),r("xrange",e),e=O(e,t),r("stars",e),e),g=e=>!e||"x"===e.toLowerCase()||"*"===e,v=(e,t)=>e.trim().split(/\s+/).map((e=>m(e,t))).join(" "),m=(e,t)=>{const n=t.loose?a[s.TILDELOOSE]:a[s.TILDE];return e.replace(n,((t,n,i,o,a)=>{let s;return r("tilde",e,t,n,i,o,a),g(n)?s="":g(i)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:g(o)?s=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:a?(r("replaceTilde pr",a),s=`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`):s=`>=${n}.${i}.${o} <${n}.${+i+1}.0-0`,r("tilde return",s),s}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>{r("caret",e,t);const n=t.loose?a[s.CARETLOOSE]:a[s.CARET],i=t.includePrerelease?"-0":"";return e.replace(n,((t,n,o,a,s)=>{let l;return r("caret",e,t,n,o,a,s),g(n)?l="":g(o)?l=`>=${n}.0.0${i} <${+n+1}.0.0-0`:g(a)?l="0"===n?`>=${n}.${o}.0${i} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${i} <${+n+1}.0.0-0`:s?(r("replaceCaret pr",s),l="0"===n?"0"===o?`>=${n}.${o}.${a}-${s} <${n}.${o}.${+a+1}-0`:`>=${n}.${o}.${a}-${s} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${a}-${s} <${+n+1}.0.0-0`):(r("no pr"),l="0"===n?"0"===o?`>=${n}.${o}.${a}${i} <${n}.${o}.${+a+1}-0`:`>=${n}.${o}.${a}${i} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${a} <${+n+1}.0.0-0`),r("caret return",l),l}))},y=(e,t)=>(r("replaceXRanges",e,t),e.split(/\s+/).map((e=>w(e,t))).join(" ")),w=(e,t)=>{e=e.trim();const n=t.loose?a[s.XRANGELOOSE]:a[s.XRANGE];return e.replace(n,((n,i,o,a,s,l)=>{r("xRange",e,n,i,o,a,s,l);const c=g(o),h=c||g(a),d=h||g(s),p=d;return"="===i&&p&&(i=""),l=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&p?(h&&(a=0),s=0,">"===i?(i=">=",h?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):"<="===i&&(i="<",h?o=+o+1:a=+a+1),"<"===i&&(l="-0"),n=`${i+o}.${a}.${s}${l}`):h?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),r("xRange return",n),n}))},O=(e,t)=>(r("replaceStars",e,t),e.trim().replace(a[s.STAR],"")),A=(e,t)=>(r("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?s.GTE0PRE:s.GTE0],"")),x=e=>(t,n,i,r,o,a,s,l,c,h,d,p,u)=>`${n=g(i)?"":g(r)?`>=${i}.0.0${e?"-0":""}`:g(o)?`>=${i}.${r}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=g(c)?"":g(h)?`<${+c+1}.0.0-0`:g(d)?`<${c}.${+h+1}.0-0`:p?`<=${c}.${h}.${d}-${p}`:e?`<${c}.${h}.${+d+1}-0`:`<=${l}`}`.trim(),N=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(r(e[n].semver),e[n].semver!==i.ANY&&e[n].semver.prerelease.length>0){const i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0};return Ue}const We=Xe();var Ve=(e,t,n)=>{try{t=new We(t,n)}catch(e){return!1}return t.test(e)};var He={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},qe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Ye={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Je=Array.prototype.slice,Qe=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Je.call(t,1))};var Ze={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:(e,t,n,i,r,o,a)=>new Date(e,t||0,null!=n?n:1,i||0,r||0,o||0,a||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Qe("join",arguments)},indexof:function(){return Qe("indexOf",arguments)},lastindexof:function(){return Qe("lastIndexOf",arguments)},slice:function(){return Qe("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat:parseFloat,parseInt:parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Qe("substring",arguments,String)},split:function(){return Qe("split",arguments,String)},replace:function(){return Qe("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Ke=["view","item","group","xy","x","y"],et={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:"datum"===n?e.datum:"event"===n?e.event:"item"===n?e.item:He[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);return n&&(e.memberDepth-=1),i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Ze[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>qe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Ye[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>"&&"===t.operator?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce(((t,n)=>{e.memberDepth+=1;const i=e(n.key);return e.memberDepth-=1,t[i]=e(n.value),t}),{})};function tt(e,t,n,i,r,o){const a=e=>et[e.type](a,e);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=r,a.item=o,Ke.forEach((e=>a.fn[e]=function(){return r.vega[e](...arguments)})),a(e)}var nt={operator(e,t){const n=t.ast,i=e.functions;return e=>tt(n,i,e)},parameter(e,t){const n=t.ast,i=e.functions;return(e,t)=>tt(n,i,t,e)},event(e,t){const n=t.ast,i=e.functions;return e=>tt(n,i,void 0,void 0,e)},handler(e,t){const n=t.ast,i=e.functions;return(e,t)=>{const r=t.item&&t.item.datum;return tt(n,i,e,r,t)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o="group"===n||"image"===n||"rect"===n;return(e,t)=>{const a=e.datum;let s,l=0;for(const n in i)s=tt(i[n].ast,r,t,a,void 0,e),e[n]!==s&&(e[n]=s,l=1);return"rule"!==n&&function(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}(e,i,o),l}}};function it(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var rt="2.10.0";const ot="#fff",at={background:"#333",title:{color:ot,subtitleColor:ot},style:{"guide-label":{fill:ot},"guide-title":{fill:ot}},axis:{domainColor:ot,gridColor:"#888",tickColor:ot}},st="#4572a7",lt={background:"#fff",arc:{fill:st},area:{fill:st},line:{stroke:st,strokeWidth:2},path:{stroke:st},rect:{fill:st},shape:{stroke:st},symbol:{fill:st,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ct="#30a2da",ht="#cbcbcb",dt="#f0f0f0",pt="#333",ut={arc:{fill:ct},area:{fill:ct},axis:{domainColor:ht,grid:!0,gridColor:ht,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:ht,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:dt,group:{fill:dt},legend:{labelColor:pt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:pt,titleFontSize:14,titlePadding:10},line:{stroke:ct,strokeWidth:2},path:{stroke:ct,strokeWidth:.5},rect:{fill:ct},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ct},bar:{binSpacing:2,fill:ct,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ft="#000",gt={group:{fill:"#e5e5e5"},arc:{fill:ft},area:{fill:ft},line:{stroke:ft},path:{stroke:ft},rect:{fill:ft},shape:{stroke:ft},symbol:{fill:ft,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},vt="Benton Gothic, sans-serif",mt="#82c6df",Et="Benton Gothic Bold, sans-serif",bt="normal",yt={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},wt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Et,fontSize:22,fontWeight:"normal"},arc:{fill:mt},area:{fill:mt},line:{stroke:mt,strokeWidth:2},path:{stroke:mt},rect:{fill:mt},shape:{stroke:mt},symbol:{fill:mt,size:30},axis:{labelFont:vt,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Et,titleFontSize:13,titleFontWeight:bt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:vt,labelFontSize:11.5,symbolType:"square",titleFont:Et,titleFontSize:13,titleFontWeight:bt},range:{category:yt["category-6"],diverging:yt["fireandice-6"],heatmap:yt["fire-7"],ordinal:yt["fire-7"],ramp:yt["fire-7"]}},Ot="#ab5787",At="#979797",xt={background:"#f9f9f9",arc:{fill:Ot},area:{fill:Ot},line:{stroke:Ot},path:{stroke:Ot},rect:{fill:Ot},shape:{stroke:Ot},symbol:{fill:Ot,size:30},axis:{domainColor:At,domainWidth:.5,gridWidth:.2,labelColor:At,tickColor:At,tickWidth:.2,titleColor:At},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Nt="#3e5c69",It={background:"#fff",arc:{fill:Nt},area:{fill:Nt},line:{stroke:Nt},path:{stroke:Nt},rect:{fill:Nt},shape:{stroke:Nt},symbol:{fill:Nt},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Lt="#1696d2",$t="#000000",Rt="Lato",St="Lato",Tt={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Dt={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Rt},axisX:{domain:!0,domainColor:$t,domainWidth:1,grid:!1,labelFontSize:12,labelFont:St,labelAngle:0,tickColor:$t,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Rt},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:St,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Rt,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:St,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Rt,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Tt["six-groups-cat-1"],diverging:Tt["diverging-colors"],heatmap:Tt["diverging-colors"],ordinal:Tt["six-groups-seq"],ramp:Tt["shades-blue"]},area:{fill:Lt},rect:{fill:Lt},line:{color:Lt,stroke:Lt,strokeWidth:5},trail:{color:Lt,stroke:Lt,strokeWidth:0,size:1},path:{stroke:Lt,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Lt,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Lt,stroke:null}},arc:{fill:Lt},shape:{stroke:Lt},symbol:{fill:Lt,size:30}},Ct="#3366CC",Ft="#ccc",kt="Arial, sans-serif",_t={arc:{fill:Ct},area:{fill:Ct},path:{stroke:Ct},rect:{fill:Ct},shape:{stroke:Ct},symbol:{stroke:Ct},circle:{fill:Ct},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:kt,fontSize:12},"guide-title":{font:kt,fontSize:12},"group-title":{font:kt,fontSize:12}},title:{font:kt,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Ft,tickColor:Ft,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Pt=e=>e*(1/3+1),Mt=Pt(9),jt=Pt(10),zt=Pt(12),Ut="Segoe UI",Bt="wf_standard-font, helvetica, arial, sans-serif",Gt="#252423",Xt="#605E5C",Wt="transparent",Vt="#118DFF",Ht="#DEEFFF",qt=[Ht,Vt],Yt={view:{stroke:Wt},background:Wt,font:Ut,header:{titleFont:Bt,titleFontSize:zt,titleColor:Gt,labelFont:Ut,labelFontSize:jt,labelColor:Xt},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Xt,labelFontSize:Mt,titleFont:Bt,titleColor:Gt,titleFontSize:zt,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Vt},line:{stroke:Vt,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Ut,fontSize:Mt,fill:Xt},arc:{fill:Vt},area:{fill:Vt,line:!0,opacity:.6},path:{stroke:Vt},rect:{fill:Vt},point:{fill:Vt,filled:!0,size:75},shape:{stroke:Vt},symbol:{fill:Vt,strokeWidth:1.5,size:50},legend:{titleFont:Ut,titleFontWeight:"bold",titleColor:Xt,labelFont:Ut,labelFontSize:jt,labelColor:Xt,symbolType:"circle",symbolSize:75},range:{category:[Vt,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:qt,heatmap:qt,ordinal:[Ht,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Vt]}},Jt=rt;var Qt=Object.freeze({__proto__:null,dark:at,excel:lt,fivethirtyeight:ut,ggplot2:gt,googlecharts:_t,latimes:wt,powerbi:Yt,quartz:xt,urbaninstitute:Dt,version:Jt,vox:It});function Zt(e,t,n){return e.fields=t||[],e.fname=n,e}function Kt(e){return 1===e.length?en(e[0]):tn(e)}const en=e=>function(t){return t[e]},tn=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function nn(e){throw Error(e)}!function(e,t,n){const i=function(e){const t=[],n=e.length;let i,r,o,a=null,s=0,l="";function c(){t.push(l+e.substring(i,r)),l="",i=r+1}for(e+="",i=r=0;r<n;++r)if(o=e[r],"\\"===o)l+=e.substring(i,r),l+=e.substring(++r,++r),i=r;else if(o===a)c(),a=null,s=-1;else{if(a)continue;i===s&&'"'===o||i===s&&"'"===o?(i=r+1,a=o):"."!==o||s?"["===o?(r>i&&c(),s=i=r+1):"]"===o&&(s||nn("Access path missing open bracket: "+e),s>0&&c(),s=0,i=r+1):r>i?c():i=r+1}return s&&nn("Access path missing closing bracket: "+e),a&&nn("Access path missing closing quote: "+e),r>i&&(r++,c()),t}(e);e=1===i.length?i[0]:e,Zt((n&&n.get||Kt)(i),[e],t||e)}("id"),Zt((e=>e),[],"identity"),Zt((()=>0),[],"zero"),Zt((()=>1),[],"one"),Zt((()=>!0),[],"true"),Zt((()=>!1),[],"false");var rn=Array.isArray;function on(e){return e===Object(e)}function an(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}(t))}var sn="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element img {\n  max-width: 200px;\n  max-height: 200px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n";const ln="vg-tooltip-element",cn={offsetX:10,offsetY:10,id:ln,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(e,t,n){if(rn(e))return`[${e.map((e=>t("string"==typeof e?e:an(e,n)))).join(", ")}]`;if(on(e)){let i="";const r=e,{title:o,image:a}=r,s=
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(r,["title","image"]);o&&(i+=`<h2>${t(o)}</h2>`),a&&(i+=`<img src="${t(a)}">`);const l=Object.keys(s);if(l.length>0){i+="<table>";for(const e of l){let r=s[e];void 0!==r&&(on(r)&&(r=an(r,n)),i+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(r)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}};class hn{constructor(e){this.options=Object.assign(Object.assign({},cn),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return sn.toString().replace(ln,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,i){var r;if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");(null!==(r=document.fullscreenElement)&&void 0!==r?r:document.body).appendChild(this.el)}if(null==i||""===i)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=function(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${o}px`)}}function dn(e,t,n){const i=e.open(t),{origin:r}=new URL(t);let o=40;e.addEventListener("message",(function t(n){n.source===i&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(i.postMessage(n,r),setTimeout(e,250),o-=1)}),250)}var pn='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function un(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")}function fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const t of n)gn(e,t);return e}function gn(t,n){for(const i of Object.keys(n))e.writeConfig(t,i,n[i],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var vn;const mn="6.18.2",En=r;let bn=o;const yn="undefined"!=typeof window?window:void 0;void 0===bn&&null!=yn&&null!==(vn=yn.vl)&&void 0!==vn&&vn.compile&&(bn=yn.vl);const wn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},On={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG",QUERY_ACTION:"Copy Selection as Query"},An={vega:"Vega","vega-lite":"Vega-Lite"},xn={vega:En.version,"vega-lite":bn?bn.version:"not available"};console.log("2/3/ 9am");const Nn={vega:e=>e,"vega-lite":(e,t)=>bn.compile(e,{config:t}).spec},In='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Ln="chart-wrapper";function $n(e){return"function"==typeof e}function Rn(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(r+e+o),a.document.title=`${An[i]} JSON Source`}let Sn=null;function Tn(e,t){if(e.$schema){const i=it(e.$schema);var n;if(t&&t!==i.library)console.warn(`The given visualization spec is written in ${An[i.library]}, but mode argument sets ${null!==(n=An[t])&&void 0!==n?n:t}.`);const r=i.library;return Ve(xn[r],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${An[r]} ${i.version}, but the current version of ${An[r]} is v${xn[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}function Dn(e){return(t=e)&&"load"in t?e:En.loader(e);var t}function Cn(t){var n,i;const r=null!==(n=null===(i=t.usermeta)||void 0===i?void 0:i.embedOptions)&&void 0!==n?n:{};return e.isString(r.defaultStyle)&&(r.defaultStyle=!1),r}const Fn="paste",kn="copy";document.addEventListener("copy",(e=>{Sn&&Sn(kn,e)})),document.addEventListener("paste",(e=>{var t,n;Sn&&(console.log("pasted new ",null==e||null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain")),console.log("pasted web ",null==e||null===(n=e.clipboardData)||void 0===n?void 0:n.getData("web text/custom")),Sn(Fn,e))}));async function _n(t,n){var i,r;let o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.isString(n)?(a=Dn(s.loader),o=JSON.parse(await a.load(n))):o=n;const l=Cn(o),c=l.loader;var h;a&&!c||(a=Dn(null!==(h=s.loader)&&void 0!==h?h:c));const d=await Pn(l,a),p=await Pn(s,a),u={...fn(p,d),config:e.mergeConfig(null!==(i=p.config)&&void 0!==i?i:{},null!==(r=d.config)&&void 0!==r?r:{})};return await jn(t,o,u,a)}async function Pn(t,n){var i;const r=e.isString(t.config)?JSON.parse(await n.load(t.config)):null!==(i=t.config)&&void 0!==i?i:{},o=e.isString(t.patch)?JSON.parse(await n.load(t.patch)):t.patch;return{...t,...o?{patch:o}:{},...r?{config:r}:{}}}function Mn(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}async function jn(t,n){var i,r,o,a,s,l,c;let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments.length>3?arguments[3]:void 0;const p=h.theme?e.mergeConfig(Qt[h.theme],null!==(i=h.config)&&void 0!==i?i:{}):h.config,u=e.isBoolean(h.actions)?h.actions:fn({},wn,null!==(r=h.actions)&&void 0!==r?r:{}),f={...On,...h.i18n},g=null!==(o=h.renderer)&&void 0!==o?o:"canvas",v=null!==(a=h.logLevel)&&void 0!==a?a:En.Warn,m=null!==(s=h.downloadFileName)&&void 0!==s?s:"visualization",E="string"==typeof t?document.querySelector(t):t;if(!E)throw new Error(`${t} does not exist`);if(!1!==h.defaultStyle){const C="vega-embed-style",{root:F,rootContainer:_}=Mn(E);if(!F.getElementById(C)){const P=document.createElement("style");P.id=C,P.innerHTML=void 0===h.defaultStyle||!0===h.defaultStyle?pn.toString():h.defaultStyle,_.appendChild(P)}}const b=Tn(n,h.mode);let y=Nn[b](n,p);if("vega-lite"===b&&y.$schema){const M=it(y.$schema);Ve(xn.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${xn.vega}.`)}E.classList.add("vega-embed"),u&&E.classList.add("has-actions"),E.innerHTML="";let w=E;if(u){const j=document.createElement("div");j.classList.add(Ln),E.appendChild(j),w=j}const O=h.patch;if(O&&(y=O instanceof Function?O(y):A(y,O,!0,!1).newDocument),h.formatLocale&&En.formatLocale(h.formatLocale),h.timeFormatLocale&&En.timeFormatLocale(h.timeFormatLocale),h.expressionFunctions)for(const z in h.expressionFunctions){const U=h.expressionFunctions[z];"fn"in U?En.expressionFunction(z,U.fn,U.visitor):U instanceof Function&&En.expressionFunction(z,U)}const{ast:x}=h,N=En.parse(y,"vega-lite"===b?{}:p,{ast:x}),I=new(h.viewClass||En.View)(N,{loader:d,logLevel:v,renderer:g,...x?{expr:null!==(l=null!==(c=En.expressionInterpreter)&&void 0!==c?c:h.expr)&&void 0!==l?l:nt}:{}});if(I.addSignalListener("autosize",((e,t)=>{const{type:n}=t;"fit-x"==n?(w.classList.add("fit-x"),w.classList.remove("fit-y")):"fit-y"==n?(w.classList.remove("fit-x"),w.classList.add("fit-y")):"fit"==n?w.classList.add("fit-x","fit-y"):w.classList.remove("fit-x","fit-y")})),!1!==h.tooltip){const B=$n(h.tooltip)?h.tooltip:new hn(!0===h.tooltip?{}:h.tooltip).call;I.tooltip(B)}let L,{hover:$}=h;if(void 0===$&&($="vega"===b),$){const{hoverSet:G,updateSet:X}="boolean"==typeof $?{}:$;I.hover(G,X)}if(h&&(null!=h.width&&I.width(h.width),null!=h.height&&I.height(h.height),null!=h.padding&&I.padding(h.padding)),await I.initialize(w,h.bind).runAsync(),!1!==u){let W=E;if(!1!==h.defaultStyle){const H=document.createElement("details");H.title=f.CLICK_TO_VIEW_ACTIONS,E.append(H),W=H;const q=document.createElement("summary");q.innerHTML=In,H.append(q),L=e=>{H.contains(e.target)||H.removeAttribute("open")},document.addEventListener("click",L)}const V=document.createElement("div");if(W.append(V),V.classList.add("vega-actions"),!0===u||!1!==u.export)for(const Y of["svg","png"])if(!0===u||!0===u.export||u.export[Y]){const J=f[`${Y.toUpperCase()}_ACTION`],Q=document.createElement("a");Q.text=J,Q.href="#",Q.target="_blank",Q.download=`${m}.${Y}`,Q.addEventListener("mousedown",(async function(e){e.preventDefault();const t=await I.toImageURL(Y,h.scaleFactor);this.href=t})),V.append(Q)}if(!0===u||!1!==u.source){const Z=document.createElement("a");Z.text=f.SOURCE_ACTION,Z.href="#",Z.addEventListener("click",(function(e){var t,i;Rn(k(n),null!==(t=h.sourceHeader)&&void 0!==t?t:"",null!==(i=h.sourceFooter)&&void 0!==i?i:"",b),e.preventDefault()})),V.append(Z)}if("vega-lite"===b&&(!0===u||!1!==u.compiled)){const K=document.createElement("a");K.text=f.COMPILED_ACTION,K.href="#",K.addEventListener("click",(function(e){var t,n;Rn(k(y),null!==(t=h.sourceHeader)&&void 0!==t?t:"",null!==(n=h.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),V.append(K)}if(!0===u||!1!==u.editor){var R;const ee=null!==(R=h.editorUrl)&&void 0!==R?R:"https://vega.github.io/editor/",te=document.createElement("a");te.text=f.EDITOR_ACTION,te.href="#",te.addEventListener("click",(function(e){dn(window,ee,{config:p,mode:b,renderer:g,spec:k(n)}),e.preventDefault()})),V.append(te)}if(("vega-lite"==b||!0===u||!1!==u.copySelection)&&!0!==u){var S;if(console.log("about to set view to window"),window&&null!==(S=w)&&void 0!==S&&S.parentElement){const le=w.parentElement.id;var T;if(le&&le.startsWith("altair-viz"))null!==(T=window)&&void 0!==T&&T.vega_views||(window.vega_views={}),window.vega_views[le]=I;else console.log("no alt id",I)}const ne=document.createElement("div"),ie="copy-alert"+Math.random().toString(36).slice(-5);function re(e){console.log("selection",e),console.log("pasted text",e);const{data:t}=I.getState({data:En.truthy,signals:En.falsy,recurse:!0}),n=Object.keys(t).filter((e=>e.includes("_store"))).find((e=>e.includes("ALX")))||"";console.log("pasting selname",n),I.data(n,e).runAsync().then((e=>{console.log("selection after",I.data(n)),ae()}))}ne.classList.add("alert"),ne.id=ie,ne.style.opacity="0",ne.style.fontFamily="Lato, Helvetica, sans-serif",ne.style.color="black",ne.style.margin="4px auto",ne.style.padding="8px",ne.style.width="100px",ne.style.borderRadius="4px",ne.style.textAlign="center",E.appendChild(ne),I.addEventListener("mousedown",(function(e){Sn=(e,t)=>{if(e===kn)console.log(I.signal),se(t);else{var n;const e=JSON.parse((null===(n=t.clipboardData)||void 0===n?void 0:n.getData("web text/custom"))||"");console.log("copied selection!",e),re(e)}},e.preventDefault(),e.stopPropagation()}));const oe=document.createElement("a");function ae(){ne.innerHTML="Pasted!",ne.style.borderLeft="5px solid darkgray",ne.style.background="#bbbbbb",ne.animate([{opacity:"1",transform:"translateY(-10px)"},{opacity:"0",transform:"translateY(0px)"}],{duration:750,iterations:1})}oe.text=f.QUERY_ACTION,oe.href="#";const se=function(e){const{data:t,signals:i}=I.getState({data:En.truthy,signals:En.truthy,recurse:!0}),r=Object.keys(t).filter((e=>e.endsWith("_store"))).map((e=>e.replace("_store",""))).concat(Object.keys(i).filter((e=>e.includes("ALX")))),o=[...new Set(r)],a={group:[],filter:[]};console.log("selectionNames",o);for(const e of o){if(!e.includes("ALX"))continue;if(I.signal(e)){if(e.endsWith("GROUP")){const t=zn(e,I);""!==t&&a.group.push(t)}if(e.endsWith("FILTER")){const t=Gn(e,I,n)||null;t&&(a.filter=a.filter.concat(t))}}}console.log("post query!",a);let s="";const l=a.group.join("\n          ");a.group.length>0&&(s+=l);const c=`df.query("${a.filter.join(" and ")}")\n          `;if(a.filter.length>0&&(s+=c),s.length>0){var h,d;console.log("setting custom!"),null==e||null===(h=e.clipboardData)||void 0===h||h.setData("text/plain",s),console.log("signals",I.getState().signals);const t=o.find((e=>e.includes("ALX")));if(t&&(console.log("in-selname!",t),!t.includes("query"))){var p;const n=I.data(t+"_store");console.log("in-copying!",n),null==e||null===(p=e.clipboardData)||void 0===p||p.setData("web text/custom",JSON.stringify(n))}console.log(null==e?void 0:e.clipboardData,"set",null==e||null===(d=e.clipboardData)||void 0===d?void 0:d.setData),null==e||e.preventDefault(),ne.innerHTML="Copied!",ne.style.borderLeft="5px solid darkgreen",ne.style.borderRadius="5px",ne.style.background="#a8f0c6",ne.animate([{opacity:"1",transform:"translateY(-10px)"},{opacity:"0",transform:"translateY(0px)"}],{duration:750,iterations:1})}};oe.addEventListener("click",(()=>se())),V.append(oe)}}function D(){L&&document.removeEventListener("click",L),I.finalize()}return{view:I,spec:n,vgSpec:y,finalize:D,embedOptions:h}}function zn(e,t){let n="";const i=t.signal(e);if("vlPoint"in i){const e=Object.keys(i).find((e=>e.includes("ALX_GROUP_COLUMN"))),t=i[e],r={};for(const e of t)r[e]="Group";const o=e.replace("ALX_GROUP_COLUMN_","");n=`\nALX_MAP = ${JSON.stringify(r)}\ndf["ALX_GROUP"] = df["${o}"].map(ALX_MAP).fillna(df["${o}"])\ndf.groupby("ALX_GROUP").mean(numeric_only=True)\n    `}return n}function Un(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e&&e[t]===n)return e;for(let r in e)if(e.hasOwnProperty(r)&&"object"==typeof e[r]&&!i.includes(r)){const o=Un(e[r],t,n,i);if(o)return o}return null}function Bn(e,t){console.log("finding spec",e,t);const n=Un(t,"name",e,["data","datasets"]);return console.log("found selection from spec",n),n}function Gn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Bn(e,n),r=[];if(i){console.log("in selection");const n=i.select.type;if("point"==n){const n=t.data(e+"_store");console.log("in point instances!",n);const i=t.signal(e);console.log("in point signal!",i);const o=Object.keys(i);for(const e of o)if("vlPoint"!==e){const t=i[e].map(Vn);r.push(` ${e} in [${t.join(",")}]`)}console.log("past pushed point queries",r)}else if("interval"==n){const n=t.data(e+"_store");for(const e of n)for(const t in e.fields){const i=e.fields[t];"E"==i.type?n.map((e=>{const n=Xn(i.field,e.values[t]);console.log("categorical interval",n),r.push(n)})):n.map((e=>{e.fields[t].field;const n=i.field,o=e.values[t].sort((function(e,t){return e-t})),[a,s]=o;r.push(Wn(n,a,s))}))}}}return console.log("queries!",r),r}function Xn(e,t){return` ${e} in [${t.map(Vn).join(",")}] `}function Wn(e,t,n){return` (${e}>=${t.toFixed(2)} and ${e}<=${n.toFixed(2)}) `}function Vn(t){return e.isString(t)&&isNaN(t)?"'"+t+"'":t.toString()}async function Hn(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=document.createElement("div");i.classList.add("vega-embed-wrapper");const r=document.createElement("div");i.appendChild(r);const o=!0===n.actions||!1===n.actions?n.actions:{export:!0,source:!1,compiled:!0,editor:!0,...null!==(t=n.actions)&&void 0!==t?t:{}},a=await _n(r,e,{actions:o,...null!=n?n:{}});return i.value=a.view,i}function qn(e){return e instanceof HTMLElement}document.addEventListener("mousedown",(e=>{Sn=null})),window.addEventListener("message",(e=>{"https://colab.research.google.com"===e.origin&&(console.log("received message",e.data),e.data(window))}));const Yn=function(){return arguments.length>1&&(e.isString(arguments.length<=0?void 0:arguments[0])&&!un(arguments.length<=0?void 0:arguments[0])||qn(arguments.length<=0?void 0:arguments[0])||3===arguments.length)?_n(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):Hn(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])};return Yn.vegaLite=bn,Yn.vl=bn,Yn.container=Hn,Yn.embed=_n,Yn.vega=En,Yn.default=_n,Yn.version=mn,Yn}));
//# sourceMappingURL=vega-embed.min.js.map
